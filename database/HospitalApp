package database;

import java.sql.Connection;
import java.sql.SQLException;
import java.util.InputMismatchException;
import java.util.Scanner;

public class HospitalApp {

    public static void main(String[] args) {

        try (Connection conn = DBConnection.getConnection();
             Scanner sc = new Scanner(System.in)) {

            int choice = 0;

            do {
                System.out.println("\n----- Patient Menu -----");
                System.out.println("1) Insert new record");
                System.out.println("2) Display all records");
                System.out.println("3) Exit");
                System.out.print("Choose an option: ");

                try {
                    choice = sc.nextInt();
                    sc.nextLine();

                    switch (choice) {
                        case 1:
                            InsertPatient.insertPatient(conn, sc);
                            break;
                        case 2:
                            DisplayPatients.displayPatients(conn);
                            break;
                        case 3:
                            System.out.println("Exiting...");
                            break;
                        default:
                            System.out.println("Invalid option. Please choose 1–3.");
                    }

                } catch (InputMismatchException e) {
                    System.out.println("Invalid input: Please enter a number (1–3).");
                    sc.nextLine();
                }

            } while (choice != 3);

        } catch (SQLException e) {
            System.out.println("✗ Cannot connect to database: " + e.getMessage());
        }
    }
}
